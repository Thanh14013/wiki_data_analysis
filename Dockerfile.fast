FROM wiki-pipeline:v5

# Add dashboard dependencies
RUN pip install --no-cache-dir streamlit plotly pandas psycopg2-binary

# Copy new dashboard code
COPY dashboard /app/dashboard
COPY ingestion /app/ingestion
COPY processing/stream_job.py /app/processing/stream_job.py
COPY processing/schemas.py /app/processing/schemas.py

# Expose port for Streamlit
EXPOSE 8501

CMD ["python3", "--version"]
